const _creat_desc = (o,Cls=o.constructor)=>{
    var si = o.byteOffset;
    var ei = si + o.byteLength;
    var ta = new Cls(o.buffer);
    var subvw =    ta.subarray(si/Cls.BYTES_PER_ELEMENT,ei/Cls.BYTES_PER_ELEMENT);
    var s ="[";
    for(var i=0;i< subvw.length-1;++i) {
       if(typeof(subvw[i]) === "bigint") {
           s += subvw[i] + "n" + ","  
       } else {
           s += subvw[i] + ","
       }       
    }
    if(subvw.length ===0) {
    } else {
         if(typeof(subvw[subvw.length-1]) === "bigint") {
             s += subvw[subvw.length-1] + "n";
         } else {
             s += subvw[subvw.length-1]
         }
    }
    s += "]"
    return(s)
}

const to_str = (o) => {
      var u8a        = new Uint8Array(o);
      var u8a_str    = JSON.stringify(Array.from(u8a));
      var ab_str     ;
      if(o.resizable) {
          ab_str = `new ArrayBuffer(${o.byteLength},{maxByteLength:${o.maxByteLength}})`;
      } else {
          ab_str = `new ArrayBuffer(${o.byteLength})`
      }
      return(`(()=>{ var ab = ${ab_str};(new Uint8Array(ab)).set(${u8a_str});return(ab);})()`);
}

module.exports = (o,idnt="",name)=>{
   var s = idnt;
   if(name !== undefined) {
       s += `var ${idnt} = `;
   } else   {
   }
   s += to_str(o);
   return(s);
}
module.exports.ab = to_str;

Object.defineProperty(
    module.exports,
    "_creat_desc",
    {
        value: _creat_desc,
        enumerable: false
    }
);
