const {sync} = require("nv-facutil-simple-test");
const v8 = require("v8");
const eq = (b0,b1)=> {
    var u8a = new Uint8Array(b1);
    for(let i =0;i<b0.length;++i) {
        if(b0[i] === u8a[i]) {

        } else {
            throw(i)
        }
    }
}
var fj = (o)=> JSON.stringify(o);
const {encd}  = require("../w");

const ENCD_UN = 0X5F;
const ENCD_NU = 0X30;

var f0 = (o)=> v8.serialize(o);
var f1 = (o)=> encd(o,15);             //version default is 15 , using 13 just for test

var ctors = [
    EvalError,
    RangeError,
    ReferenceError,
    SyntaxError,
    TypeError,
    URIError
];

for(let Cls of ctors) {
var f               = new Cls(Cls.toString()) ;
eq(f0(f),f1(f))                            
console.log(sync(1000000,f0,f))
console.log(sync(1000000,f1,f))
}
