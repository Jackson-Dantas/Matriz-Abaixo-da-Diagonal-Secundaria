const MAX_CODE = 65536 + 2**20 - 1;


const _split_to_hilo = (cd)=> {
    cd = cd - 65536;
	let lo = (cd &  0x03ff) | (0b1101_1100 <<8);
	let hi = (cd >> 10)     | (0b1101_1000 <<8);
	return([hi,lo])
}

const split = (cd) => {
    if(cd<65536) {
        let _0 = cd & 0xff;
        let _1 = cd >> 8;
        return([_0,_1])
    } else {
        let [hi,lo] = _split_to_hilo(cd);
        let _0 = hi & 0xff;
        let _1 = hi >>8 ;
        let _2 = lo & 0xff;
        let _3 = lo >>8;
        return([_0,_1,_2,_3])
    }
}

module.exports = {
    MAX_CODE,
    _split_to_hilo,
    split,
}
