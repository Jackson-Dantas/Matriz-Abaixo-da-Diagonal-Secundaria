const _def = require("./encd-def");

class Mach {
    u8a;
    ei=0;
    cnt = 0
    constructor(max_sz) {
        this.u8a = new Uint8Array(max_sz);
    }
    get view_() {
        return(this.u8a.subarray(0,this.ei))
    }
    input(code) {
        let a = _def.split(code);
        ++this.cnt;
        switch(a.length) {
            case 2: {
                this.u8a[this.ei] = a[0];
                ++this.ei;
                break;
            }
            case 4: {
                this.u8a[this.ei] = a[0];
                ++this.ei;
                this.u8a[this.ei] = a[1];
                ++this.ei;
                this.u8a[this.ei] = a[2];
                ++this.ei;
                this.u8a[this.ei] = a[3];
                ++this.ei;                
                break;
            }
        }
        return(a)
    }
    ////
    reset() {
        this.ei =0;
        this.cnt =0;
    }
    ////
}


module.exports = {
   Mach,
}
